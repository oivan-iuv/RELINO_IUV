<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">


    <p:dialog id="dlgCambiaPass" header="POR POLÍTICAS DE SEGURIDAD DEBE CAMBIAR SU CONTRASEÑA" 
              widgetVar="dlgCambiaContrasenia" resizable="false"  
              showEffect="fade" hideEffect="explode"
              draggable="false" modal="true" appendTo="@(body)"
              closeOnEscape="false" responsive="true" closable="false">
        <h:form id="frmRegUsuario">
            <br/>
            <!--<p:growl showDetail="true" showSummary="true" />-->
            <p:messages id="msjPass" showDetail="true" showSummary="true" >
                <p:autoUpdate/>
            </p:messages>
            <br/>
            <p:panelGrid id="pnlRegUsuario" columns="2" >
                <p:outputLabel value="USUARIO:"/>
                <h:outputText value="#{logginController.username}"/>
                <p:outputLabel value="Contraseña nueva"/>
                <p:password id="itpwdm" feedback="true" inline="true" 
                            match="itpwdm2" 
                            value="#{passwordController.password1}" 
                            maxlength="15" size="15"
                            label="Contraseña nueva" 
                            required="true" 
                            weakLabel="Débil" goodLabel="Buena" strongLabel="Fuerte" 
                            promptLabel="Por favor capture la nueva contraseña"
                            validatorMessage="Las contraseñas no coinciden"/>
                <p:outputLabel value="Confirmar contraseña"/>
                <p:password id="itpwdm2" feedback="true" inline="true" 
                            value="#{passwordController.password2}" 
                            maxlength="15" size="15" 
                            label="Repetir contraseña" 
                            required="true" 
                            weakLabel="Débil" goodLabel="Buena" strongLabel="Fuerte" 
                            promptLabel="Por favor confirme la nueva contraseña" />                    
            </p:panelGrid>
            <br></br>
            <div align="center">
                <center>
                    <p:commandButton id="btnModUsuario" value="Actualizar" 
                                     update="frmRegUsuario"   
                                     process="@(this)"
                                     action="#{passwordController.actualizarPassword(1)}" 
                                     icon="ui-icon-check"
                                     >
                        <!--     oncomplete="cerrarDialog(xhr, status, args)" onsuccess="PF('dlgCambiaContrasenia').hide();"-->
                        <f:setPropertyActionListener value="#{logginController.usuarioSession}" target="#{passwordController.usuario}"/>
                    </p:commandButton>  
                    <p:spacer width="30px" 
                              height="0"/>
                    <p:commandButton id="but_Omitir" 
                                     icon="fa fa-fw fa-ban"
                                     value="Omitir"
                                     label="Omitir"
                                     process="@this"
                                     onsuccess="PF('dlgCambiaContrasenia').hide();"
                                     actionListener="#{logginController.omitirCambioPasswd()}"
                                     disabled="#{logginController.botonOmitirPass}"/>
                </center>
            </div>
            <br></br>
            <p:panelGrid columns="1"  rendered="#{!passwordController.cambioExitoso}">
                <p:separator/>  
                <center>
                    <h:outputText style="font-weight: bolder; font-style: italic" 
                                  value="NOTA: LA NUEVA CONTRASEÑA DEBE CUMPLIR CON LO SIGUIENTE."/>
                    <ul>
                        <li style="text-align: left">Contar con un mínimo de 8 caracteres y un máximo de 12.</li>
                        <li style="text-align: left">Combinación de números y letras, (minúsculas y mayúsculas).</li>
                        <li style="text-align: left">Un caracter especial, (permitidos: $, #, %).</li>
                    </ul>
                    <p:outputLabel value="EJEMPLO DE CONTRASEÑA IDÓNEA: Sis123$a" 
                                   style="text-align: center; font-style: italic; font-weight: bolder"/>
                </center>
            </p:panelGrid>
        </h:form>
    </p:dialog>
</html>